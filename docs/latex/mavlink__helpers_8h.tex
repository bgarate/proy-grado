\hypertarget{mavlink__helpers_8h}{}\section{src/hal/pb2/include/mavlink/mavlink\+\_\+helpers.h File Reference}
\label{mavlink__helpers_8h}\index{src/hal/pb2/include/mavlink/mavlink\+\_\+helpers.\+h@{src/hal/pb2/include/mavlink/mavlink\+\_\+helpers.\+h}}
{\ttfamily \#include \char`\"{}string.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}checksum.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mavlink\+\_\+types.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mavlink\+\_\+conversions.\+h\char`\"{}}\\*
Include dependency graph for mavlink\+\_\+helpers.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
union \hyperlink{union____mavlink__bitfield}{\+\_\+\+\_\+mavlink\+\_\+bitfield}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mavlink__helpers_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} \hyperlink{mavlink__types_8h_aec6f7af3879252822d8fb108e97aafc2}{mavlink\+\_\+status\+\_\+t} $\ast$ \hyperlink{mavlink__helpers_8h_ac006d308067f48514ca5c0cf0b046c28}{mavlink\+\_\+get\+\_\+channel\+\_\+status} (uint8\+\_\+t chan)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} mavlink\+\_\+message\+\_\+t $\ast$ \hyperlink{mavlink__helpers_8h_a65cce515993cd158e828aa7d061ca5b8}{mavlink\+\_\+get\+\_\+channel\+\_\+buffer} (uint8\+\_\+t chan)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void \hyperlink{mavlink__helpers_8h_a7968a864b6526d84472c5bc5b78adce2}{mavlink\+\_\+reset\+\_\+channel\+\_\+status} (uint8\+\_\+t chan)
\begin{DoxyCompactList}\small\item\em Reset the status of a channel. \end{DoxyCompactList}\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t \hyperlink{mavlink__helpers_8h_aa66131138fc02101dcc73b4b556ab422}{mavlink\+\_\+finalize\+\_\+message\+\_\+chan} (mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t system\+\_\+id, uint8\+\_\+t component\+\_\+id, uint8\+\_\+t chan, uint8\+\_\+t \hyperlink{asn1_8h_a5a2d57a92488e64c730cabc247c9d5b5}{length})
\begin{DoxyCompactList}\small\item\em Finalize a M\+A\+V\+Link message with channel assignment. \end{DoxyCompactList}\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t \hyperlink{mavlink__helpers_8h_af3bea083c5ec83f5b6570b2bd4a817d0}{mavlink\+\_\+finalize\+\_\+message} (mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t system\+\_\+id, uint8\+\_\+t component\+\_\+id, uint8\+\_\+t \hyperlink{asn1_8h_a5a2d57a92488e64c730cabc247c9d5b5}{length})
\begin{DoxyCompactList}\small\item\em Finalize a M\+A\+V\+Link message with M\+A\+V\+L\+I\+N\+K\+\_\+\+C\+O\+M\+M\+\_\+0 as default channel. \end{DoxyCompactList}\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t \hyperlink{mavlink__helpers_8h_afea0a9befa84822fd62c2899ea0d849e}{mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer} (uint8\+\_\+t $\ast$buffer, const mavlink\+\_\+message\+\_\+t $\ast$msg)
\begin{DoxyCompactList}\small\item\em Pack a message to send it over a serial byte stream. \end{DoxyCompactList}\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void \hyperlink{mavlink__helpers_8h_ae7cbde569213151151d20c3766edd244}{mavlink\+\_\+start\+\_\+checksum} (mavlink\+\_\+message\+\_\+t $\ast$msg)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void \hyperlink{mavlink__helpers_8h_a3293deb7b51f9a9f0b30bf56c8739593}{mavlink\+\_\+update\+\_\+checksum} (mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t c)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t \hyperlink{mavlink__helpers_8h_a0e22b58900ea14d70bff3aadb38dbb3d}{mavlink\+\_\+frame\+\_\+char\+\_\+buffer} (mavlink\+\_\+message\+\_\+t $\ast$rxmsg, \hyperlink{mavlink__types_8h_aec6f7af3879252822d8fb108e97aafc2}{mavlink\+\_\+status\+\_\+t} $\ast$status, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, \hyperlink{mavlink__types_8h_aec6f7af3879252822d8fb108e97aafc2}{mavlink\+\_\+status\+\_\+t} $\ast$r\+\_\+mavlink\+\_\+status)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t \hyperlink{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6}{mavlink\+\_\+frame\+\_\+char} (uint8\+\_\+t chan, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, \hyperlink{mavlink__types_8h_aec6f7af3879252822d8fb108e97aafc2}{mavlink\+\_\+status\+\_\+t} $\ast$r\+\_\+mavlink\+\_\+status)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t \hyperlink{mavlink__helpers_8h_ad91e8323cefc65965574c09e72365d7d}{mavlink\+\_\+parse\+\_\+char} (uint8\+\_\+t chan, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, \hyperlink{mavlink__types_8h_aec6f7af3879252822d8fb108e97aafc2}{mavlink\+\_\+status\+\_\+t} $\ast$r\+\_\+mavlink\+\_\+status)
\item 
\hyperlink{protocol_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t \hyperlink{mavlink__helpers_8h_ad102a58f323758552a9c439c1ede4403}{put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index} (int32\+\_\+t b, uint8\+\_\+t \hyperlink{x509v3_8h_ab3c186980893d6836a68407d221ae9c9}{bits}, uint8\+\_\+t packet\+\_\+index, uint8\+\_\+t bit\+\_\+index, uint8\+\_\+t $\ast$r\+\_\+bit\+\_\+index, uint8\+\_\+t $\ast$buffer)
\begin{DoxyCompactList}\small\item\em Put a bitfield of length 1-\/32 bit into the buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER@{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER}}
\index{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER@{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER}{MAVLINK_HELPER}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER}\hypertarget{mavlink__helpers_8h_a8201ad9cec6e1480d1f018161aaa5c6f}{}\label{mavlink__helpers_8h_a8201ad9cec6e1480d1f018161aaa5c6f}


\subsection{Function Documentation}
\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+finalize\+\_\+message@{mavlink\+\_\+finalize\+\_\+message}}
\index{mavlink\+\_\+finalize\+\_\+message@{mavlink\+\_\+finalize\+\_\+message}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+finalize\+\_\+message(mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t system\+\_\+id, uint8\+\_\+t component\+\_\+id, uint8\+\_\+t length)}{mavlink_finalize_message(mavlink_message_t *msg, uint8_t system_id, uint8_t component_id, uint8_t length)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t mavlink\+\_\+finalize\+\_\+message (
\begin{DoxyParamCaption}
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{msg, }
\item[{uint8\+\_\+t}]{system\+\_\+id, }
\item[{uint8\+\_\+t}]{component\+\_\+id, }
\item[{uint8\+\_\+t}]{length}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_af3bea083c5ec83f5b6570b2bd4a817d0}{}\label{mavlink__helpers_8h_af3bea083c5ec83f5b6570b2bd4a817d0}


Finalize a M\+A\+V\+Link message with M\+A\+V\+L\+I\+N\+K\+\_\+\+C\+O\+M\+M\+\_\+0 as default channel. 



Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_af3bea083c5ec83f5b6570b2bd4a817d0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_af3bea083c5ec83f5b6570b2bd4a817d0_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+finalize\+\_\+message\+\_\+chan@{mavlink\+\_\+finalize\+\_\+message\+\_\+chan}}
\index{mavlink\+\_\+finalize\+\_\+message\+\_\+chan@{mavlink\+\_\+finalize\+\_\+message\+\_\+chan}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+finalize\+\_\+message\+\_\+chan(mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t system\+\_\+id, uint8\+\_\+t component\+\_\+id, uint8\+\_\+t chan, uint8\+\_\+t length)}{mavlink_finalize_message_chan(mavlink_message_t *msg, uint8_t system_id, uint8_t component_id, uint8_t chan, uint8_t length)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t mavlink\+\_\+finalize\+\_\+message\+\_\+chan (
\begin{DoxyParamCaption}
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{msg, }
\item[{uint8\+\_\+t}]{system\+\_\+id, }
\item[{uint8\+\_\+t}]{component\+\_\+id, }
\item[{uint8\+\_\+t}]{chan, }
\item[{uint8\+\_\+t}]{length}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_aa66131138fc02101dcc73b4b556ab422}{}\label{mavlink__helpers_8h_aa66131138fc02101dcc73b4b556ab422}


Finalize a M\+A\+V\+Link message with channel assignment. 

This function calculates the checksum and sets length and aircraft id correctly. It assumes that the message id and the payload are already correctly set. This function can also be used if the message header has already been written before (as in mavlink\+\_\+msg\+\_\+xxx\+\_\+pack instead of mavlink\+\_\+msg\+\_\+xxx\+\_\+pack\+\_\+headerless), it just introduces little extra overhead.


\begin{DoxyParams}{Parameters}
{\em msg} & \hyperlink{class_message}{Message} to finalize \\
\hline
{\em system\+\_\+id} & Id of the sending (this) system, 1-\/127 \\
\hline
{\em length} & \hyperlink{class_message}{Message} length \\
\hline
\end{DoxyParams}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_aa66131138fc02101dcc73b4b556ab422_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_aa66131138fc02101dcc73b4b556ab422_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+frame\+\_\+char@{mavlink\+\_\+frame\+\_\+char}}
\index{mavlink\+\_\+frame\+\_\+char@{mavlink\+\_\+frame\+\_\+char}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+frame\+\_\+char(uint8\+\_\+t chan, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, mavlink\+\_\+status\+\_\+t $\ast$r\+\_\+mavlink\+\_\+status)}{mavlink_frame_char(uint8_t chan, uint8_t c, mavlink_message_t *r_message, mavlink_status_t *r_mavlink_status)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t mavlink\+\_\+frame\+\_\+char (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{chan, }
\item[{uint8\+\_\+t}]{c, }
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{r\+\_\+message, }
\item[{{\bf mavlink\+\_\+status\+\_\+t} $\ast$}]{r\+\_\+mavlink\+\_\+status}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6}{}\label{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6}
This is a convenience function which handles the complete M\+A\+V\+Link parsing. the function will parse one byte at a time and return the complete packet once it could be successfully decoded. This function will return 0, 1 or 2 (M\+A\+V\+L\+I\+N\+K\+\_\+\+F\+R\+A\+M\+I\+N\+G\+\_\+\+I\+N\+C\+O\+M\+P\+L\+E\+TE, M\+A\+V\+L\+I\+N\+K\+\_\+\+F\+R\+A\+M\+I\+N\+G\+\_\+\+OK or M\+A\+V\+L\+I\+N\+K\+\_\+\+F\+R\+A\+M\+I\+N\+G\+\_\+\+B\+A\+D\+\_\+\+C\+RC)

Messages are parsed into an internal buffer (one for each channel). When a complete message is received it is copies into $\ast$return\+Msg and the channel\textquotesingle{}s status is copied into $\ast$return\+Stats.


\begin{DoxyParams}{Parameters}
{\em chan} & ID of the current channel. This allows to parse different channels with this function. a channel is not a physical message channel like a serial port, but a logic partition of the communication streams in this case. C\+O\+M\+M\+\_\+\+NB is the limit for the number of channels on M\+CU (e.\+g. A\+R\+M7), while C\+O\+M\+M\+\_\+\+N\+B\+\_\+\+H\+I\+GH is the limit for the number of channels in Linux/\+Windows \\
\hline
{\em c} & The char to parse\\
\hline
{\em return\+Msg} & N\+U\+LL if no message could be decoded, the message data else \\
\hline
{\em return\+Stats} & if a message was decoded, this is filled with the channel\textquotesingle{}s stats \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no message could be decoded, 1 on good message and C\+RC, 2 on bad C\+RC
\end{DoxyReturn}
A typical use scenario of this function call is\+:


\begin{DoxyCode}
1 #include <mavlink.h>
2 
3 mavlink\_message\_t msg;
4 int chan = 0;
5 
6 
7 while(serial.bytesAvailable > 0)
8 \{
9   uint8\_t byte = serial.getNextByte();
10   if (mavlink\_frame\_char(chan, byte, &msg) != MAVLINK\_FRAMING\_INCOMPLETE)
11     \{
12     printf("Received message with ID %d, sequence: %d from component %d of system %d", msg.msgid, msg.seq,
       msg.compid, msg.sysid);
13     \}
14 \}
\end{DoxyCode}
 

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+frame\+\_\+char\+\_\+buffer@{mavlink\+\_\+frame\+\_\+char\+\_\+buffer}}
\index{mavlink\+\_\+frame\+\_\+char\+\_\+buffer@{mavlink\+\_\+frame\+\_\+char\+\_\+buffer}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+frame\+\_\+char\+\_\+buffer(mavlink\+\_\+message\+\_\+t $\ast$rxmsg, mavlink\+\_\+status\+\_\+t $\ast$status, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, mavlink\+\_\+status\+\_\+t $\ast$r\+\_\+mavlink\+\_\+status)}{mavlink_frame_char_buffer(mavlink_message_t *rxmsg, mavlink_status_t *status, uint8_t c, mavlink_message_t *r_message, mavlink_status_t *r_mavlink_status)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t mavlink\+\_\+frame\+\_\+char\+\_\+buffer (
\begin{DoxyParamCaption}
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{rxmsg, }
\item[{{\bf mavlink\+\_\+status\+\_\+t} $\ast$}]{status, }
\item[{uint8\+\_\+t}]{c, }
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{r\+\_\+message, }
\item[{{\bf mavlink\+\_\+status\+\_\+t} $\ast$}]{r\+\_\+mavlink\+\_\+status}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_a0e22b58900ea14d70bff3aadb38dbb3d}{}\label{mavlink__helpers_8h_a0e22b58900ea14d70bff3aadb38dbb3d}
This is a varient of \hyperlink{mavlink__helpers_8h_ab9ea03db8cd45ce94b64b508b087ebe6}{mavlink\+\_\+frame\+\_\+char()} but with caller supplied parsing buffers. It is useful when you want to create a M\+A\+V\+Link parser in a library that doesn\textquotesingle{}t use any global variables


\begin{DoxyParams}{Parameters}
{\em rxmsg} & parsing message buffer \\
\hline
{\em status} & parsing starus buffer \\
\hline
{\em c} & The char to parse\\
\hline
{\em return\+Msg} & N\+U\+LL if no message could be decoded, the message data else \\
\hline
{\em return\+Stats} & if a message was decoded, this is filled with the channel\textquotesingle{}s stats \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no message could be decoded, 1 on good message and C\+RC, 2 on bad C\+RC
\end{DoxyReturn}
A typical use scenario of this function call is\+:


\begin{DoxyCode}
1 #include <mavlink.h>
2 
3 mavlink\_message\_t msg;
4 int chan = 0;
5 
6 
7 while(serial.bytesAvailable > 0)
8 \{
9   uint8\_t byte = serial.getNextByte();
10   if (mavlink\_frame\_char(chan, byte, &msg) != MAVLINK\_FRAMING\_INCOMPLETE)
11     \{
12     printf("Received message with ID %d, sequence: %d from component %d of system %d", msg.msgid, msg.seq,
       msg.compid, msg.sysid);
13     \}
14 \}
\end{DoxyCode}
 

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_a0e22b58900ea14d70bff3aadb38dbb3d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_a0e22b58900ea14d70bff3aadb38dbb3d_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+get\+\_\+channel\+\_\+buffer@{mavlink\+\_\+get\+\_\+channel\+\_\+buffer}}
\index{mavlink\+\_\+get\+\_\+channel\+\_\+buffer@{mavlink\+\_\+get\+\_\+channel\+\_\+buffer}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+get\+\_\+channel\+\_\+buffer(uint8\+\_\+t chan)}{mavlink_get_channel_buffer(uint8_t chan)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} mavlink\+\_\+message\+\_\+t$\ast$ mavlink\+\_\+get\+\_\+channel\+\_\+buffer (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{chan}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_a65cce515993cd158e828aa7d061ca5b8}{}\label{mavlink__helpers_8h_a65cce515993cd158e828aa7d061ca5b8}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_a65cce515993cd158e828aa7d061ca5b8_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+get\+\_\+channel\+\_\+status@{mavlink\+\_\+get\+\_\+channel\+\_\+status}}
\index{mavlink\+\_\+get\+\_\+channel\+\_\+status@{mavlink\+\_\+get\+\_\+channel\+\_\+status}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+get\+\_\+channel\+\_\+status(uint8\+\_\+t chan)}{mavlink_get_channel_status(uint8_t chan)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} {\bf mavlink\+\_\+status\+\_\+t}$\ast$ mavlink\+\_\+get\+\_\+channel\+\_\+status (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{chan}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_ac006d308067f48514ca5c0cf0b046c28}{}\label{mavlink__helpers_8h_ac006d308067f48514ca5c0cf0b046c28}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_ac006d308067f48514ca5c0cf0b046c28_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer@{mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer}}
\index{mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer@{mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer(uint8\+\_\+t $\ast$buffer, const mavlink\+\_\+message\+\_\+t $\ast$msg)}{mavlink_msg_to_send_buffer(uint8_t *buffer, const mavlink_message_t *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint16\+\_\+t mavlink\+\_\+msg\+\_\+to\+\_\+send\+\_\+buffer (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer, }
\item[{const mavlink\+\_\+message\+\_\+t $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_afea0a9befa84822fd62c2899ea0d849e}{}\label{mavlink__helpers_8h_afea0a9befa84822fd62c2899ea0d849e}


Pack a message to send it over a serial byte stream. 

\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+parse\+\_\+char@{mavlink\+\_\+parse\+\_\+char}}
\index{mavlink\+\_\+parse\+\_\+char@{mavlink\+\_\+parse\+\_\+char}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+parse\+\_\+char(uint8\+\_\+t chan, uint8\+\_\+t c, mavlink\+\_\+message\+\_\+t $\ast$r\+\_\+message, mavlink\+\_\+status\+\_\+t $\ast$r\+\_\+mavlink\+\_\+status)}{mavlink_parse_char(uint8_t chan, uint8_t c, mavlink_message_t *r_message, mavlink_status_t *r_mavlink_status)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t mavlink\+\_\+parse\+\_\+char (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{chan, }
\item[{uint8\+\_\+t}]{c, }
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{r\+\_\+message, }
\item[{{\bf mavlink\+\_\+status\+\_\+t} $\ast$}]{r\+\_\+mavlink\+\_\+status}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_ad91e8323cefc65965574c09e72365d7d}{}\label{mavlink__helpers_8h_ad91e8323cefc65965574c09e72365d7d}
This is a convenience function which handles the complete M\+A\+V\+Link parsing. the function will parse one byte at a time and return the complete packet once it could be successfully decoded. This function will return 0 or 1.

Messages are parsed into an internal buffer (one for each channel). When a complete message is received it is copies into $\ast$return\+Msg and the channel\textquotesingle{}s status is copied into $\ast$return\+Stats.


\begin{DoxyParams}{Parameters}
{\em chan} & ID of the current channel. This allows to parse different channels with this function. a channel is not a physical message channel like a serial port, but a logic partition of the communication streams in this case. C\+O\+M\+M\+\_\+\+NB is the limit for the number of channels on M\+CU (e.\+g. A\+R\+M7), while C\+O\+M\+M\+\_\+\+N\+B\+\_\+\+H\+I\+GH is the limit for the number of channels in Linux/\+Windows \\
\hline
{\em c} & The char to parse\\
\hline
{\em return\+Msg} & N\+U\+LL if no message could be decoded, the message data else \\
\hline
{\em return\+Stats} & if a message was decoded, this is filled with the channel\textquotesingle{}s stats \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no message could be decoded or bad C\+RC, 1 on good message and C\+RC
\end{DoxyReturn}
A typical use scenario of this function call is\+:


\begin{DoxyCode}
1 #include <mavlink.h>
2 
3 mavlink\_message\_t msg;
4 int chan = 0;
5 
6 
7 while(serial.bytesAvailable > 0)
8 \{
9   uint8\_t byte = serial.getNextByte();
10   if (mavlink\_parse\_char(chan, byte, &msg))
11     \{
12     printf("Received message with ID %d, sequence: %d from component %d of system %d", msg.msgid, msg.seq,
       msg.compid, msg.sysid);
13     \}
14 \}
\end{DoxyCode}
 

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_ad91e8323cefc65965574c09e72365d7d_cgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+reset\+\_\+channel\+\_\+status@{mavlink\+\_\+reset\+\_\+channel\+\_\+status}}
\index{mavlink\+\_\+reset\+\_\+channel\+\_\+status@{mavlink\+\_\+reset\+\_\+channel\+\_\+status}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+reset\+\_\+channel\+\_\+status(uint8\+\_\+t chan)}{mavlink_reset_channel_status(uint8_t chan)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void mavlink\+\_\+reset\+\_\+channel\+\_\+status (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{chan}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_a7968a864b6526d84472c5bc5b78adce2}{}\label{mavlink__helpers_8h_a7968a864b6526d84472c5bc5b78adce2}


Reset the status of a channel. 



Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_a7968a864b6526d84472c5bc5b78adce2_cgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+start\+\_\+checksum@{mavlink\+\_\+start\+\_\+checksum}}
\index{mavlink\+\_\+start\+\_\+checksum@{mavlink\+\_\+start\+\_\+checksum}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+start\+\_\+checksum(mavlink\+\_\+message\+\_\+t $\ast$msg)}{mavlink_start_checksum(mavlink_message_t *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void mavlink\+\_\+start\+\_\+checksum (
\begin{DoxyParamCaption}
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_ae7cbde569213151151d20c3766edd244}{}\label{mavlink__helpers_8h_ae7cbde569213151151d20c3766edd244}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_ae7cbde569213151151d20c3766edd244_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!mavlink\+\_\+update\+\_\+checksum@{mavlink\+\_\+update\+\_\+checksum}}
\index{mavlink\+\_\+update\+\_\+checksum@{mavlink\+\_\+update\+\_\+checksum}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{mavlink\+\_\+update\+\_\+checksum(mavlink\+\_\+message\+\_\+t $\ast$msg, uint8\+\_\+t c)}{mavlink_update_checksum(mavlink_message_t *msg, uint8_t c)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} void mavlink\+\_\+update\+\_\+checksum (
\begin{DoxyParamCaption}
\item[{mavlink\+\_\+message\+\_\+t $\ast$}]{msg, }
\item[{uint8\+\_\+t}]{c}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_a3293deb7b51f9a9f0b30bf56c8739593}{}\label{mavlink__helpers_8h_a3293deb7b51f9a9f0b30bf56c8739593}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mavlink__helpers_8h_a3293deb7b51f9a9f0b30bf56c8739593_icgraph}
\end{center}
\end{figure}


\index{mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}!put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index@{put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index}}
\index{put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index@{put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index}!mavlink\+\_\+helpers.\+h@{mavlink\+\_\+helpers.\+h}}
\subsubsection[{\texorpdfstring{put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index(int32\+\_\+t b, uint8\+\_\+t bits, uint8\+\_\+t packet\+\_\+index, uint8\+\_\+t bit\+\_\+index, uint8\+\_\+t $\ast$r\+\_\+bit\+\_\+index, uint8\+\_\+t $\ast$buffer)}{put_bitfield_n_by_index(int32_t b, uint8_t bits, uint8_t packet_index, uint8_t bit_index, uint8_t *r_bit_index, uint8_t *buffer)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+A\+V\+L\+I\+N\+K\+\_\+\+H\+E\+L\+P\+ER} uint8\+\_\+t put\+\_\+bitfield\+\_\+n\+\_\+by\+\_\+index (
\begin{DoxyParamCaption}
\item[{int32\+\_\+t}]{b, }
\item[{uint8\+\_\+t}]{bits, }
\item[{uint8\+\_\+t}]{packet\+\_\+index, }
\item[{uint8\+\_\+t}]{bit\+\_\+index, }
\item[{uint8\+\_\+t $\ast$}]{r\+\_\+bit\+\_\+index, }
\item[{uint8\+\_\+t $\ast$}]{buffer}
\end{DoxyParamCaption}
)}\hypertarget{mavlink__helpers_8h_ad102a58f323758552a9c439c1ede4403}{}\label{mavlink__helpers_8h_ad102a58f323758552a9c439c1ede4403}


Put a bitfield of length 1-\/32 bit into the buffer. 


\begin{DoxyParams}{Parameters}
{\em b} & the value to add, will be encoded in the bitfield \\
\hline
{\em bits} & number of bits to use to encode b, e.\+g. 1 for boolean, 2, 3, etc. \\
\hline
{\em packet\+\_\+index} & the position in the packet (the index of the first byte to use) \\
\hline
{\em bit\+\_\+index} & the position in the byte (the index of the first bit to use) \\
\hline
{\em buffer} & packet buffer to write into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
new position of the last used byte in the buffer 
\end{DoxyReturn}
